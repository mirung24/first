<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="code">
	
	<!-- 코드관리 리스트 조회 -->
	<select id="code_list" parameterType="String" resultType="vo.CodeVO">
		SELECT * FROM pos_code WHERE level=1 AND codename LIKE concat('%', #{searchInput}, '%')
	</select>
	
	<!-- 코드관리 > 코드등록 -->
	<insert id="code_ins" parameterType="vo.CodeVO">
		INSERT INTO pos_code(code,codename,remarks,useyn,level,upcode) 
		VALUES(fn_code('CO1'),#{codename},#{remarks},#{useyn},'1','')
	</insert>
	
	<!-- 마스터 코드 수정 -->
	<update id="master_edit" parameterType="vo.CodeVO">
		update pos_code set codename=#{codename},
							remarks=#{remarks},
							useyn=#{useyn}
		where code=#{code}
	</update>
	
	<!-- 하위 코드 조회 -->
	<select id="low_list" resultType="vo.CodeVO" parameterType="String">
		select code,codename,remarks,useyn from pos_code where upcode=#{code} order by code desc
	</select>
	
	<!-- 하위 코드 저장 -->
	<insert id="sub_insert" parameterType="vo.CodeVO">
		INSERT INTO pos_code(code,codename,remarks,useyn,level,upcode) 
		VALUES(fn_code('CO2'),#{codename},#{remarks},#{useyn},'2',#{upcode})
	</insert>
	
	<!-- 하위 코드 수정 -->
	<update id="sub_update" parameterType="vo.CodeVO">
		update pos_code set codename=#{codename},
		   					remarks=#{remarks},
		   					useyn=#{useyn}  
    	WHERE code=#{code}
	</update>
</mapper>












